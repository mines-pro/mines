<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mines Jackpot Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(20, 40, 80, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            max-width: 600px;
            width: 100%;
        }

        .header {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .title {
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .deposit-btn, .withdraw-btn {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .deposit-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .withdraw-btn {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
        }

        .deposit-btn:hover, .withdraw-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .tile {
            aspect-ratio: 1;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-size: 40px;
            position: relative;
            background: transparent;
        }

        .tile.unrevealed {
            cursor: pointer;
        }
        
        .tile.unrevealed:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .tile.revealed {
            cursor: default;
        }

        .tile.exploded {
            animation: explode 0.5s ease-out;
        }

        @keyframes explode {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); background: #ff0000; }
            100% { transform: scale(1); }
        }

        .balance-section {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .balance-item {
            text-align: center;
        }

        .balance-label {
            font-size: 14px;
            color: #ccc;
            margin-bottom: 5px;
        }

        .balance-value {
            font-size: 24px;
            color: #FFD700;
            font-weight: bold;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .bet-btn {
            background: linear-gradient(135deg, #4169E1, #1E90FF);
            color: white;
        }

        .mines-btn {
            background: linear-gradient(135deg, #DC143C, #8B0000);
            color: white;
        }

        .cashout-btn {
            background: linear-gradient(135deg, #32CD32, #228B22);
            color: white;
        }

        .reset-btn {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
        }

        .control-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
        }

        .modal h2 {
            color: #FFD700;
            margin-bottom: 20px;
            text-align: center;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            color: #fff;
            margin-bottom: 5px;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #4169E1;
            border-radius: 5px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .confirm-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .cancel-btn {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }

        .message {
            text-align: center;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            font-weight: bold;
            display: none;
        }

        .message.success {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
            color: #4CAF50;
        }

        .message.error {
            background: rgba(244, 67, 54, 0.3);
            border: 2px solid #f44336;
            color: #f44336;
        }

        .message.info {
            background: rgba(33, 150, 243, 0.3);
            border: 2px solid #2196F3;
            color: #2196F3;
        }

        @media (max-width: 600px) {
            .title {
                font-size: 36px;
            }

            .game-grid {
                gap: 5px;
            }

            .tile {
                font-size: 30px;
            }

            .controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="title">MINES</div>
            <button class="deposit-btn" onclick="openDepositModal()">ðŸ’° DEPOSIT</button>
            <button class="withdraw-btn" onclick="openWithdrawModal()">ðŸ’¸ WITHDRAW</button>
        </div>

        <div class="message" id="message"></div>

        <div class="game-grid" id="gameGrid"></div>

        <div class="balance-section">
            <div class="balance-item">
                <div class="balance-label">Balance</div>
                <div class="balance-value">Rs <span id="balance">0</span></div>
            </div>
            <div class="balance-item">
                <div class="balance-label">Current Win</div>
                <div class="balance-value">Rs <span id="currentWin">0</span></div>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn bet-btn" onclick="openBetModal()">
                ðŸ’° Bet Rs<span id="currentBet">100</span>
            </button>
            <button class="control-btn mines-btn" onclick="openMinesModal()">
                ðŸ’£ Mines: <span id="minesCount">3</span>
            </button>
            <button class="control-btn cashout-btn" id="cashoutBtn" onclick="cashout()" disabled>
                ðŸ’µ Cash Out
            </button>
            <button class="control-btn reset-btn" onclick="resetGame()">
                ðŸ”„ Reset
            </button>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div class="modal" id="depositModal">
        <div class="modal-content">
            <h2>ðŸ’° Deposit Funds</h2>
            <div class="input-group">
                <label>Amount (Rs)</label>
                <input type="number" id="depositAmount" placeholder="Enter amount" min="100" step="100">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn confirm-btn" onclick="confirmDeposit()">Confirm</button>
                <button class="modal-btn cancel-btn" onclick="closeModal('depositModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div class="modal" id="withdrawModal">
        <div class="modal-content">
            <h2>ðŸ’¸ Withdraw Funds</h2>
            <div class="input-group">
                <label>Amount (Rs)</label>
                <input type="number" id="withdrawAmount" placeholder="Enter amount" min="100" step="100">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn confirm-btn" onclick="confirmWithdraw()">Confirm</button>
                <button class="modal-btn cancel-btn" onclick="closeModal('withdrawModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Bet Modal -->
    <div class="modal" id="betModal">
        <div class="modal-content">
            <h2>ðŸ’° Set Bet Amount</h2>
            <div class="input-group">
                <label>Bet Amount (Rs)</label>
                <input type="number" id="betAmount" placeholder="Enter bet amount" min="100" max="10000" step="10" value="100">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn confirm-btn" onclick="confirmBet()">Confirm</button>
                <button class="modal-btn cancel-btn" onclick="closeModal('betModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Mines Modal -->
    <div class="modal" id="minesModal">
        <div class="modal-content">
            <h2>ðŸ’£ Set Number of Mines</h2>
            <div class="input-group">
                <label>Number of Mines (1-24)</label>
                <input type="number" id="minesInput" placeholder="Enter mines count" min="1" max="24" value="3">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn confirm-btn" onclick="confirmMines()">Confirm</button>
                <button class="modal-btn cancel-btn" onclick="closeModal('minesModal')">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            balance: 0,
            totalDeposit: 0,
            totalWon: 0,
            totalLost: 0,
            currentBet: 0,
            minesCount: 3,
            currentWin: 0,
            gameActive: false,
            revealedTiles: 0,
            minePositions: []
        };

        // Create professional silver coin SVG - realistic iron/steel metal texture
        function createSilverCoin() {
            return `
                <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
                    <!-- Deep bottom shadow for 3D depth -->
                    <ellipse cx="50" cy="55" rx="46" ry="9" fill="rgba(0,0,0,0.5)" opacity="0.7"/>
                    
                    <!-- Outer coin edge with beveled look -->
                    <circle cx="50" cy="50" r="47" fill="url(#silverEdgeBevel)" stroke="#5A5A5A" stroke-width="1"/>
                    
                    <!-- Side thickness of coin (3D effect) -->
                    <circle cx="50" cy="50" r="45" fill="url(#silverSideThickness)"/>
                    
                    <!-- Main coin face with hammered metal texture -->
                    <circle cx="50" cy="50" r="43" fill="url(#silverMainFace)" stroke="#888888" stroke-width="0.8"/>
                    
                    <!-- Outer decorative ridge -->
                    <circle cx="50" cy="50" r="41" fill="none" stroke="url(#silverRidge1)" stroke-width="2" opacity="0.8"/>
                    
                    <!-- Middle decorative band -->
                    <circle cx="50" cy="50" r="38" fill="none" stroke="url(#silverRidge2)" stroke-width="1.5"/>
                    
                    <!-- Inner raised platform for text -->
                    <circle cx="50" cy="50" r="35" fill="url(#silverInnerPlatform)"/>
                    
                    <!-- Subtle radial lines for texture -->
                    <g opacity="0.15">
                        <line x1="50" y1="15" x2="50" y2="20" stroke="#000" stroke-width="0.5"/>
                        <line x1="65" y1="20" x2="63" y2="25" stroke="#000" stroke-width="0.5"/>
                        <line x1="75" y1="35" x2="72" y2="38" stroke="#000" stroke-width="0.5"/>
                        <line x1="80" y1="50" x2="75" y2="50" stroke="#000" stroke-width="0.5"/>
                        <line x1="75" y1="65" x2="72" y2="62" stroke="#000" stroke-width="0.5"/>
                        <line x1="65" y1="80" x2="63" y2="75" stroke="#000" stroke-width="0.5"/>
                        <line x1="50" y1="85" x2="50" y2="80" stroke="#000" stroke-width="0.5"/>
                        <line x1="35" y1="80" x2="37" y2="75" stroke="#000" stroke-width="0.5"/>
                        <line x1="25" y1="65" x2="28" y2="62" stroke="#000" stroke-width="0.5"/>
                        <line x1="20" y1="50" x2="25" y2="50" stroke="#000" stroke-width="0.5"/>
                        <line x1="25" y1="35" x2="28" y2="38" stroke="#000" stroke-width="0.5"/>
                        <line x1="35" y1="20" x2="37" y2="25" stroke="#000" stroke-width="0.5"/>
                    </g>
                    
                    <!-- Rs symbol with deep engraved effect -->
                    <text x="50" y="68" font-size="36" font-weight="bold" fill="#4A4A4A" text-anchor="middle" 
                          style="font-family: 'Times New Roman', serif; 
                                 paint-order: stroke; 
                                 stroke: rgba(0,0,0,0.4); 
                                 stroke-width: 0.8px;
                                 filter: url(#emboss);">Rs</text>
                    
                    <!-- Light reflection on top (polished metal effect) -->
                    <ellipse cx="50" cy="23" rx="24" ry="10" fill="rgba(255,255,255,0.6)" opacity="0.7"/>
                    <ellipse cx="35" cy="32" rx="10" ry="6" fill="rgba(255,255,255,0.4)" opacity="0.5"/>
                    <circle cx="68" cy="30" r="3" fill="rgba(255,255,255,0.5)" opacity="0.6"/>
                    
                    <!-- Bottom shadow on face for depth -->
                    <ellipse cx="50" cy="77" rx="24" ry="8" fill="rgba(0,0,0,0.15)" opacity="0.4"/>
                    
                    <defs>
                        <!-- Edge bevel gradient -->
                        <linearGradient id="silverEdgeBevel" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#A8A8A8;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#C8C8C8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#888888;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Side thickness gradient -->
                        <linearGradient id="silverSideThickness" x1="30%" y1="30%" x2="70%" y2="70%">
                            <stop offset="0%" style="stop-color:#B8B8B8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#909090;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Main face with hammered texture -->
                        <radialGradient id="silverMainFace">
                            <stop offset="0%" style="stop-color:#F5F5F5;stop-opacity:1" />
                            <stop offset="40%" style="stop-color:#E0E0E0;stop-opacity:1" />
                            <stop offset="70%" style="stop-color:#D0D0D0;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#B8B8B8;stop-opacity:1" />
                        </radialGradient>
                        
                        <!-- Ridge gradients for decorative bands -->
                        <linearGradient id="silverRidge1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#A0A0A0;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#D8D8D8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#989898;stop-opacity:1" />
                        </linearGradient>
                        
                        <linearGradient id="silverRidge2" x1="100%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#B8B8B8;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#E8E8E8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#A8A8A8;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Inner platform gradient -->
                        <radialGradient id="silverInnerPlatform">
                            <stop offset="0%" style="stop-color:#E8E8E8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#C8C8C8;stop-opacity:1" />
                        </radialGradient>
                        
                        <!-- Emboss filter for text -->
                        <filter id="emboss">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="1" result="blur"/>
                            <feOffset in="blur" dx="1" dy="1" result="offsetBlur"/>
                            <feSpecularLighting in="blur" surfaceScale="3" specularConstant="0.8" specularExponent="20" lighting-color="white" result="specOut">
                                <fePointLight x="-5000" y="-10000" z="20000"/>
                            </feSpecularLighting>
                            <feComposite in="specOut" in2="SourceAlpha" operator="in" result="specOut"/>
                            <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0"/>
                        </filter>
                    </defs>
                </svg>
            `;
        }

        // Create professional gold coin SVG - realistic gold metal texture
        function createGoldCoin() {
            return `
                <svg viewBox="0 0 100 100" style="width: 100%; height: 100%;">
                    <!-- Deep bottom shadow for 3D depth -->
                    <ellipse cx="50" cy="55" rx="46" ry="9" fill="rgba(0,0,0,0.6)" opacity="0.7"/>
                    
                    <!-- Outer coin edge with beveled look -->
                    <circle cx="50" cy="50" r="47" fill="url(#goldEdgeBevel)" stroke="#8B6914" stroke-width="1"/>
                    
                    <!-- Side thickness of coin (3D effect) -->
                    <circle cx="50" cy="50" r="45" fill="url(#goldSideThickness)"/>
                    
                    <!-- Main coin face with polished metal texture -->
                    <circle cx="50" cy="50" r="43" fill="url(#goldMainFace)" stroke="#B8860B" stroke-width="0.8"/>
                    
                    <!-- Outer decorative ridge -->
                    <circle cx="50" cy="50" r="41" fill="none" stroke="url(#goldRidge1)" stroke-width="2" opacity="0.9"/>
                    
                    <!-- Middle decorative band -->
                    <circle cx="50" cy="50" r="38" fill="none" stroke="url(#goldRidge2)" stroke-width="1.5"/>
                    
                    <!-- Inner raised platform for text -->
                    <circle cx="50" cy="50" r="35" fill="url(#goldInnerPlatform)"/>
                    
                    <!-- Subtle radial lines for texture -->
                    <g opacity="0.2">
                        <line x1="50" y1="15" x2="50" y2="20" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="65" y1="20" x2="63" y2="25" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="75" y1="35" x2="72" y2="38" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="80" y1="50" x2="75" y2="50" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="75" y1="65" x2="72" y2="62" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="65" y1="80" x2="63" y2="75" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="50" y1="85" x2="50" y2="80" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="35" y1="80" x2="37" y2="75" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="25" y1="65" x2="28" y2="62" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="20" y1="50" x2="25" y2="50" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="25" y1="35" x2="28" y2="38" stroke="#8B6914" stroke-width="0.5"/>
                        <line x1="35" y1="20" x2="37" y2="25" stroke="#8B6914" stroke-width="0.5"/>
                    </g>
                    
                    <!-- Rs symbol with raised embossed effect -->
                    <text x="50" y="68" font-size="36" font-weight="bold" fill="#8B6914" text-anchor="middle" 
                          style="font-family: 'Times New Roman', serif; 
                                 paint-order: stroke; 
                                 stroke: rgba(255,215,0,0.5); 
                                 stroke-width: 0.8px;
                                 filter: url(#goldEmboss);">Rs</text>
                    
                    <!-- Light reflection on top (polished gold effect) -->
                    <ellipse cx="50" cy="23" rx="24" ry="10" fill="rgba(255,255,255,0.7)" opacity="0.8"/>
                    <ellipse cx="35" cy="32" rx="10" ry="6" fill="rgba(255,255,255,0.5)" opacity="0.6"/>
                    <circle cx="68" cy="30" r="3" fill="rgba(255,255,255,0.6)" opacity="0.7"/>
                    
                    <!-- Gold sparkle effects -->
                    <circle cx="70" cy="28" r="1.5" fill="rgba(255,255,255,0.9)" opacity="0.9"/>
                    <circle cx="75" cy="42" r="1" fill="rgba(255,255,255,0.8)" opacity="0.8"/>
                    <circle cx="28" cy="38" r="1.2" fill="rgba(255,255,255,0.85)" opacity="0.85"/>
                    
                    <!-- Bottom shadow on face for depth -->
                    <ellipse cx="50" cy="77" rx="24" ry="8" fill="rgba(139,105,20,0.2)" opacity="0.5"/>
                    
                    <defs>
                        <!-- Edge bevel gradient -->
                        <linearGradient id="goldEdgeBevel" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#DAA520;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#FFD700;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#B8860B;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Side thickness gradient -->
                        <linearGradient id="goldSideThickness" x1="30%" y1="30%" x2="70%" y2="70%">
                            <stop offset="0%" style="stop-color:#F4C430;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#DAA520;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Main face with polished texture -->
                        <radialGradient id="goldMainFace">
                            <stop offset="0%" style="stop-color:#FFF8DC;stop-opacity:1" />
                            <stop offset="30%" style="stop-color:#FFEC8B;stop-opacity:1" />
                            <stop offset="60%" style="stop-color:#FFD700;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#DAA520;stop-opacity:1" />
                        </radialGradient>
                        
                        <!-- Ridge gradients for decorative bands -->
                        <linearGradient id="goldRidge1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#DAA520;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#FFE55C;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#B8860B;stop-opacity:1" />
                        </linearGradient>
                        
                        <linearGradient id="goldRidge2" x1="100%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#F4C430;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#FFD700;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#DAA520;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Inner platform gradient -->
                        <radialGradient id="goldInnerPlatform">
                            <stop offset="0%" style="stop-color:#FFE873;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#F4C430;stop-opacity:1" />
                        </radialGradient>
                        
                        <!-- Gold emboss filter for text -->
                        <filter id="goldEmboss">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="1" result="blur"/>
                            <feOffset in="blur" dx="1" dy="1" result="offsetBlur"/>
                            <feSpecularLighting in="blur" surfaceScale="4" specularConstant="1" specularExponent="25" lighting-color="#FFD700" result="specOut">
                                <fePointLight x="-5000" y="-10000" z="20000"/>
                            </feSpecularLighting>
                            <feComposite in="specOut" in2="SourceAlpha" operator="in" result="specOut"/>
                            <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0"/>
                        </filter>
                    </defs>
                </svg>
            `;
        }

        // Initialize game
        function initGame() {
            createGrid();
            updateDisplay();
        }

        function createGrid() {
            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            
            // Create all 25 tiles with silver coins
            for (let i = 0; i < 25; i++) {
                const tile = document.createElement('div');
                tile.className = 'tile unrevealed';
                tile.dataset.index = i;
                tile.innerHTML = createSilverCoin(); // All tiles start as silver coins
                tile.onclick = () => revealTile(i);
                grid.appendChild(tile);
            }
        }

        function revealTile(index) {
            if (!gameState.gameActive) {
                if (gameState.currentBet === 0) {
                    showMessage('Please set bet amount first!', 'error');
                    return;
                }
                startGame();
            }

            const tiles = document.querySelectorAll('.tile');
            const tile = tiles[index];

            if (tile.classList.contains('revealed')) return;

            tile.classList.remove('unrevealed');
            tile.classList.add('revealed');

            if (gameState.minePositions.includes(index)) {
                // Hit a mine - show bomb
                tile.classList.add('exploded');
                tile.textContent = 'ðŸ’£';
                tile.style.background = 'linear-gradient(135deg, #4B0082, #8B008B)';
                tile.style.fontSize = '40px';
                gameOver(false);
            } else {
                // Safe tile - convert silver to gold
                tile.innerHTML = createGoldCoin();
                gameState.revealedTiles++;
                
                // Calculate win based on mines count
                let winAmount = 0;
                if (gameState.minesCount === 1) winAmount = 5;
                else if (gameState.minesCount === 2) winAmount = 10;
                else if (gameState.minesCount === 3) winAmount = 20;
                else if (gameState.minesCount === 4) winAmount = 40;
                else if (gameState.minesCount === 5) winAmount = 50;
                else if (gameState.minesCount === 6) winAmount = 60;
                else if (gameState.minesCount === 7) winAmount = 70;
                else if (gameState.minesCount === 8) winAmount = 80;
                else if (gameState.minesCount === 9) winAmount = 90;
                else if (gameState.minesCount === 10) winAmount = 100;
                else winAmount = gameState.minesCount * 10;
                
                gameState.currentWin += winAmount;
                updateDisplay();
                document.getElementById('cashoutBtn').disabled = false;
            }
        }

        function startGame() {
            // Balance already deducted when bet was set
            gameState.gameActive = true;
            gameState.revealedTiles = 0;
            gameState.currentWin = 0;

            // Place mines randomly
            gameState.minePositions = [];
            while (gameState.minePositions.length < gameState.minesCount) {
                const pos = Math.floor(Math.random() * 25);
                if (!gameState.minePositions.includes(pos)) {
                    gameState.minePositions.push(pos);
                }
            }

            updateDisplay();
            showMessage('Game started! Avoid the mines! ðŸ’£', 'info');
        }

        function cashout() {
            if (!gameState.gameActive || gameState.currentWin === 0) return;

            // Add both bet amount and winnings back to balance
            const totalReturn = gameState.currentBet + gameState.currentWin;
            gameState.balance += totalReturn;
            gameState.totalWon += gameState.currentWin;
            
            showMessage(`Cashed out Rs ${totalReturn}! (Bet: ${gameState.currentBet} + Win: ${gameState.currentWin}) ðŸŽ‰`, 'success');
            
            gameState.currentWin = 0;
            gameState.currentBet = 0; // Reset bet amount to 0 on cashout
            gameState.gameActive = false;
            document.getElementById('cashoutBtn').disabled = true;
            
            updateDisplay();
            revealAllTiles();
        }

        function gameOver(won) {
            gameState.gameActive = false;
            document.getElementById('cashoutBtn').disabled = true;

            if (!won) {
                gameState.totalLost += gameState.currentBet;
                showMessage(`Game Over! Lost Rs ${gameState.currentBet} ðŸ’”`, 'error');
                gameState.currentWin = 0;
                gameState.currentBet = 0; // Reset bet amount to 0 when game is lost
            }

            updateDisplay();
            revealAllTiles();
        }

        function revealAllTiles() {
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach((tile, index) => {
                if (!tile.classList.contains('revealed')) {
                    tile.classList.remove('unrevealed');
                    tile.classList.add('revealed');
                    
                    if (gameState.minePositions.includes(index)) {
                        // Show bombs
                        tile.textContent = 'ðŸ’£';
                        tile.style.background = 'linear-gradient(135deg, #4B0082, #8B008B)';
                        tile.style.fontSize = '40px';
                    } else {
                        // All other tiles become gold coins
                        tile.innerHTML = createGoldCoin();
                    }
                }
            });
        }

        function resetGame() {
            gameState.gameActive = false;
            gameState.revealedTiles = 0;
            gameState.currentWin = 0;
            gameState.minePositions = [];
            
            createGrid();
            updateDisplay();
            document.getElementById('cashoutBtn').disabled = true;
            showMessage('Game reset! Place your bet to start.', 'info');
        }

        function updateDisplay() {
            document.getElementById('balance').textContent = gameState.balance.toFixed(0);
            document.getElementById('currentWin').textContent = gameState.currentWin.toFixed(0);
            document.getElementById('currentBet').textContent = gameState.currentBet;
            document.getElementById('minesCount').textContent = gameState.minesCount;
        }

        // Modal functions
        function openDepositModal() {
            document.getElementById('depositModal').style.display = 'flex';
        }

        function openWithdrawModal() {
            document.getElementById('withdrawModal').style.display = 'flex';
        }

        function openBetModal() {
            if (gameState.gameActive) {
                showMessage('Cannot change bet during active game!', 'error');
                return;
            }
            document.getElementById('betModal').style.display = 'flex';
            document.getElementById('betAmount').value = gameState.currentBet;
        }

        function openMinesModal() {
            if (gameState.gameActive) {
                showMessage('Cannot change mines during active game!', 'error');
                return;
            }
            document.getElementById('minesModal').style.display = 'flex';
            document.getElementById('minesInput').value = gameState.minesCount;
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function confirmDeposit() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            if (isNaN(amount) || amount < 100) {
                showMessage('Minimum deposit is Rs 100', 'error');
                return;
            }

            gameState.balance += amount;
            gameState.totalDeposit += amount;
            gameState.currentBet = 0; // Reset bet amount to 0 on deposit
            updateDisplay();
            closeModal('depositModal');
            showMessage(`Successfully deposited Rs ${amount}! ðŸ’°`, 'success');
            document.getElementById('depositAmount').value = '';
        }

        function confirmWithdraw() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            if (isNaN(amount) || amount < 100) {
                showMessage('Minimum withdrawal is Rs 100', 'error');
                return;
            }

            if (amount > gameState.balance) {
                showMessage('Insufficient balance!', 'error');
                return;
            }

            gameState.balance -= amount;
            
            // If balance becomes 0, reset bet amount to 0
            if (gameState.balance === 0) {
                gameState.currentBet = 0;
            }
            
            updateDisplay();
            closeModal('withdrawModal');
            showMessage(`Successfully withdrew Rs ${amount}! ðŸ’¸`, 'success');
            document.getElementById('withdrawAmount').value = '';
        }

        function confirmBet() {
            const amount = parseFloat(document.getElementById('betAmount').value);
            if (isNaN(amount) || amount < 100) {
                showMessage('Minimum bet is Rs 100', 'error');
                return;
            }

            if (amount > 10000) {
                showMessage('Maximum bet is Rs 10,000', 'error');
                return;
            }

            if (amount > gameState.balance) {
                showMessage('Bet amount exceeds balance!', 'error');
                return;
            }

            // Deduct balance immediately when bet is set
            gameState.balance -= amount;
            gameState.currentBet = amount;
            updateDisplay();
            closeModal('betModal');
            showMessage(`Bet set to Rs ${amount}. Balance deducted. Start playing!`, 'success');
        }

        function confirmMines() {
            const count = parseInt(document.getElementById('minesInput').value);
            if (isNaN(count) || count < 1 || count > 24) {
                showMessage('Mines must be between 1 and 24', 'error');
                return;
            }

            gameState.minesCount = count;
            updateDisplay();
            closeModal('minesModal');
            showMessage(`Mines set to ${count}`, 'success');
        }

        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';

            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 3000);
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Initialize game on load
        window.onload = initGame;
    </script>
</body>
</html>
